<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Faust architecture: &lt;strong&gt;DrumThumper&lt;/strong&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Faust architecture
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">&lt;strong&gt;DrumThumper&lt;/strong&gt;</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Oboe playback sample app.</p>
<h1><a class="anchor" id="autotoc_md155"></a>
Abstract</h1>
<p><b>DrumThumper</b> is a "Drum Pad" app which demonstrates best-practices for low-latency audio playback using the Android <b>Oboe</b> API. <b>DrumThumper</b> consists of a set of trigger pad widgets and an optional <a class="el" href="structUI.html">UI</a> for controlling the level and stereo placement of each of the virtual drums. The audio samples are stored in application resources as WAV data. This is parsed and loaded (by routines in <b>parselib</b>) into memory blocks. The audio samples are mixed and played by routines in <b>iolib</b>.</p>
<p><b>DrumThumper</b> is written in a combination of Kotlin for the <a class="el" href="structUI.html">UI</a> and JNI/C++ for the player components (to demonstrate accessing native code from a Kotlin or Java application).</p>
<h1><a class="anchor" id="autotoc_md156"></a>
Scope</h1>
<p><b>DrumThumper</b> is designed with the following goals in mind:</p><ul>
<li>To demonstrate the most efficient means of playing audio with the lowest possible latency.</li>
<li>To demonstrate how to play multiple sources of audio mixed into a single Oboe stream.</li>
<li>To demonstrate the life-cycle of an Oboe audio stream and it's relationship to the application lifecycle.</li>
<li>To demonstrate the correct handling of playback errors and output device connection/disconnection.</li>
</ul>
<p>Secondarily, <b>DrumThumper</b> demonstrates:</p><ul>
<li>Using Android "assets" for audio data.</li>
<li>The mechanism for calling native (C/C++) audio functionality from a Kotlin/Java app.</li>
<li>A mechanism for sharing binary data between a Kotlin/Java app with the native (C/C++) layer.</li>
<li>A mechanism for parsing/loading one type (WAV) of audio data.</li>
<li>How to control the relative levels (gain) of audio sources mixed into an output stream.</li>
<li>How to locate a mono data source in a stereo output stream.</li>
<li>How to use the Oboe resampler to resample source audio to the device playback rate, and therefore not incur this overhead at playback time.</li>
</ul>
<p>To keep things simple, <b>DrumThumper</b> specifically does not:</p><ul>
<li>Does not support audio samples in other than 16-bit, mono PCM Samples. It does not support Stereo or different PCM formats.</li>
<li>Does not support non-WAV audio data (such as AIFF).</li>
<li>Does not support compressed audio data.</li>
</ul>
<p><b>DrumThumper</b> now supports different sample rates for the source samples.</p>
<p>If one wanted to extend <b>DrumThumper</b> to support Stereo samples:</p><ul>
<li>The SampleSource class would need to be extended to understand Stereo SampleBuffer objects, it currently assumes Mono.</li>
<li>The OneShotSampleSource.mixAudio() method would need to have separate mixing logic for Stereo and Mono SampleSource.</li>
</ul>
<h1><a class="anchor" id="autotoc_md157"></a>
DrumThumper project structure</h1>
<h2><a class="anchor" id="autotoc_md158"></a>
Kotlin App Layer</h2>
<p>Contains classes for the application logic and defines the methods for accessing the native data and player functionality.</p>
<h2><a class="anchor" id="autotoc_md159"></a>
Native (C++) layer</h2>
<p>Contains the implementation of the <code>native</code> (JNI) methods defined in the <code>DrumPlayer</code> (Kotlin) class.</p>
<h2><a class="anchor" id="autotoc_md160"></a>
Dependent Libraries</h2>
<ul>
<li><b>iolib</b> Classes for playing audio data.</li>
<li><b>parselib</b> Classes for parsing and loading audio data from WAV resources.</li>
</ul>
<h1><a class="anchor" id="autotoc_md161"></a>
App</h1>
<ul>
<li>DrumPlayer.kt The Kotlin class which provides the audio playback functionality by interfacing with the native (C++) libraries.</li>
<li>DrumThumperActivity.kt The main application logic.</li>
<li>TriggerPad.kt An Android View subclass which implements the "trigger pad" <a class="el" href="structUI.html">UI</a> widgets</li>
</ul>
<h1><a class="anchor" id="autotoc_md162"></a>
Native-interface (JNI)</h1>
<ul>
<li>DrumPlayerJNI.cpp This is where all the access to the native functionality is implemented. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
